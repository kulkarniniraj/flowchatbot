---

title: Flow Chatbot library


keywords: fastai
sidebar: home_sidebar

summary: "A chatbot library to build bots from flowchart"
description: "A chatbot library to build bots from flowchart"
nb_path: "index.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This is a small library to create flow based chatbots, like getting information from user, filling forms, asking multiple choice questions etc.</p>
<p>Need for this arose when we built a chatbot for various domains mainly for customer interaction and feedback and realised that most of the requirements are satisfied with a deterministic flow based bot.</p>
<p>Few class names given in API were inspired from fluid/water piping model.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Install">Install<a class="anchor-link" href="#Install"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Clone this repo and copy flowchatbot folder in your source folder</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Documentation">Documentation<a class="anchor-link" href="#Documentation"> </a></h2><p>Please visit <a href="https://kulkarniniraj.github.io/flowchatbot/">docs</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="How-to-use">How to use<a class="anchor-link" href="#How-to-use"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Concepts">Concepts<a class="anchor-link" href="#Concepts"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It is easier to understand classes from regular flowchart elements.</p>
<ul>
<li>A <a href="/flowchatbot/multiprocess-bot.html#Pipe"><code>Pipe</code></a> is baseclass defining few properties for all elements</li>
<li>A <a href="/flowchatbot/multiprocess-bot.html#Segment"><code>Segment</code></a> and its subclasses are regular process element of flowchart definig one operation</li>
<li>A <a href="/flowchatbot/multiprocess-bot.html#Splitter"><code>Splitter</code></a>/<a href="/flowchatbot/multiprocess-bot.html#SkipSplitter"><code>SkipSplitter</code></a> is decision making element</li>
<li>A <a href="/flowchatbot/multiprocess-bot.html#Composite"><code>Composite</code></a>/<a href="/flowchatbot/multiprocess-bot.html#LoopComposite"><code>LoopComposite</code></a> is Subroutine element which contains a bunch of child elements</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Each element takes a string key argument in constructor. This is used for:</p>
<ul>
<li>identifying children dynamically</li>
<li>saving current chatbot position in data dict to maintain session</li>
<li>as a key in data dict to save element's data</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A bot generally consists of parent <a href="/flowchatbot/multiprocess-bot.html#Composite"><code>Composite</code></a> object with all flow defined inside.
Each element supports <code>question</code> and <code>answer</code> method for interaction. <code>question</code> is where you get question corresponding to data it seeks from user. <code>answer</code> is response returned after obtaining data, including error messages.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Data and state for each element is stored in a <code>dict</code> object passed to it. For hierarchical elements like <a href="/flowchatbot/multiprocess-bot.html#Composite"><code>Composite</code></a>, data dict nest data dict of child elements.
So a nested dict may look like:</p>

<pre><code>data = {'A': {
            'data': 'data for A',
            'B':{
                'data': 'data for B',
                'C':{
                    'data': 'data for C'
                }
            },
            'D':{
                'data': 'data for D'
            },
            'E':{
                'data': 'data for E'
            }
        }
    }</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>An adapter is built on top to simplify question answer process. Given <code>TextAdapater</code> had just one method, <code>respond</code> which first call answer method of root node with user response, then seeks next question and prints it.</p>
<p><a href="/flowchatbot/multiprocess-bot.html#TextAdapter"><code>TextAdapter</code></a> stores all data in redis for session management. An alternative adapter can use any available method for session management if redis does not server purpose. Chatbot implementation and data persistance management are separated.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="A-simple-hello-world-bot">A simple hello world bot<a class="anchor-link" href="#A-simple-hello-world-bot"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We'll write a simple bot that says 'Hello World!' on any user input and repeats the process.
Conceptual flow is shown in diagram below.</p>
<p><img src="/flowchatbot/images/1.png" alt="Flow"></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">flowchatbot</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">bot</span> <span class="o">=</span> <span class="n">TextAdapter</span><span class="p">(</span>
            <span class="n">Composite</span><span class="p">(</span><span class="s1">&#39;key1&#39;</span><span class="p">,</span>
                <span class="n">Segment</span><span class="p">(</span><span class="s1">&#39;key2&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Hello World!&#39;</span><span class="p">)</span>
                           <span class="p">))</span>
<span class="n">bot</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">flushall</span><span class="p">()</span> <span class="c1"># clear all old sessions</span>

<span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;hi&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="c1"># 0 is session id, used as key in redis</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Hello World!

</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>First line shows response to input 'hi'
The blank last line means bot has restarted from top and has a blank question.</p>
<p>Let's ask a question before starting again. So modified flow would be:
<img src="/flowchatbot/images/2.png" alt="Flow 2"></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">flowchatbot</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">bot</span> <span class="o">=</span> <span class="n">TextAdapter</span><span class="p">(</span>
            <span class="n">Composite</span><span class="p">(</span><span class="s1">&#39;key1&#39;</span><span class="p">,</span>
                <span class="n">Segment</span><span class="p">(</span><span class="s1">&#39;key2&#39;</span><span class="p">,</span> <span class="s1">&#39;Loop again?&#39;</span><span class="p">,</span> <span class="s1">&#39;Hello World!&#39;</span><span class="p">)</span>
                           <span class="p">))</span>
<span class="n">bot</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">flushall</span><span class="p">()</span> <span class="c1"># clear all old sessions</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;hi&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="c1"># 0 is session id, used as key in redis</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Hello World!
Loop again?
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Hello World!
Loop again?
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Q&amp;A-bot">Q&amp;A bot<a class="anchor-link" href="#Q&amp;A-bot"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's build a bot to ask series of questions, one after another. Basic flow is shown in figure below
<img src="/flowchatbot/images/3.png" alt="Fig 3"></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">flowchatbot</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">bot</span> <span class="o">=</span> <span class="n">TextAdapter</span><span class="p">(</span>
            <span class="n">Composite</span><span class="p">(</span><span class="s1">&#39;key1&#39;</span><span class="p">,</span>
                  <span class="n">Segment</span><span class="p">(</span><span class="s1">&#39;key2&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Welcome to QnA bot&#39;</span><span class="p">),</span>
                  <span class="n">Segment</span><span class="p">(</span><span class="s1">&#39;key3&#39;</span><span class="p">,</span> <span class="s1">&#39;Your name?&#39;</span><span class="p">,</span> <span class="s1">&#39;got it&#39;</span><span class="p">),</span>
                  <span class="n">Segment</span><span class="p">(</span><span class="s1">&#39;key4&#39;</span><span class="p">,</span> <span class="s1">&#39;Your phone?&#39;</span><span class="p">,</span> <span class="s1">&#39;got it&#39;</span><span class="p">),</span>
                  <span class="n">Segment</span><span class="p">(</span><span class="s1">&#39;key5&#39;</span><span class="p">,</span> <span class="s1">&#39;Your email?&#39;</span><span class="p">,</span> <span class="s1">&#39;got it&#39;</span><span class="p">),</span>
                           <span class="p">))</span>
<span class="n">bot</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">flushall</span><span class="p">()</span> <span class="c1"># clear all old sessions</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;hi&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Welcome to QnA bot
Your name?
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;Test123&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>got it
Your phone?
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;12312313&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>got it
Your email?
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;a@b.c&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>got it

</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Validate-inputs">Validate inputs<a class="anchor-link" href="#Validate-inputs"> </a></h4><p>For now, the inputs are not validated. ValidatedSegment takes a validating function as parameter. User response will be passed to this function and the same question will repeat till input is validated. Let's add validation to phone number and email address. So flow will be like this:
<img src="/flowchatbot/images/4.png" alt="Flow 4"></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="k">def</span> <span class="nf">validate_phone</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;\d</span><span class="si">{10}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="mi">0</span>

<span class="k">def</span> <span class="nf">validate_email</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;[a-zA-Z0-9_]+@[a-zA-Z0-9_.]+\.[a-zA-Z0-9_]&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="mi">0</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">flowchatbot</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">bot</span> <span class="o">=</span> <span class="n">TextAdapter</span><span class="p">(</span>
            <span class="n">Composite</span><span class="p">(</span><span class="s1">&#39;key1&#39;</span><span class="p">,</span>
                  <span class="n">Segment</span><span class="p">(</span><span class="s1">&#39;key2&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Welcome to QnA bot&#39;</span><span class="p">),</span>
                  <span class="n">Segment</span><span class="p">(</span><span class="s1">&#39;key3&#39;</span><span class="p">,</span> <span class="s1">&#39;Your name?&#39;</span><span class="p">,</span> <span class="s1">&#39;got it&#39;</span><span class="p">),</span>
                  <span class="n">ValidatedSegment</span><span class="p">(</span><span class="s1">&#39;key4&#39;</span><span class="p">,</span> <span class="s1">&#39;Your phone?&#39;</span><span class="p">,</span> <span class="s1">&#39;got it&#39;</span><span class="p">,</span>
                                  <span class="s1">&#39;phone num should be 10 digits&#39;</span><span class="p">,</span> <span class="n">validate_phone</span><span class="p">),</span>
                  <span class="n">ValidatedSegment</span><span class="p">(</span><span class="s1">&#39;key5&#39;</span><span class="p">,</span> <span class="s1">&#39;Your email?&#39;</span><span class="p">,</span> <span class="s1">&#39;got it&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;Email should be of format user@server.domain&#39;</span><span class="p">,</span> <span class="n">validate_email</span><span class="p">),</span>
                           <span class="p">))</span>
<span class="n">bot</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">flushall</span><span class="p">()</span> <span class="c1"># clear all old sessions</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;hi&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Welcome to QnA bot
Your name?
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;Test123&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>got it
Your phone?
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;12312&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>phone num should be 10 digits
Your phone?
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;1231231312&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>got it
Your email?
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;a@b&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Email should be of format user@server.domain
Your email?
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;a@b.c&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>got it

</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Get chatbot data at end with</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">bot</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;key2&#39;: {&#39;data&#39;: &#39;hi&#39;},
 &#39;key3&#39;: {&#39;data&#39;: &#39;Test123&#39;},
 &#39;key4&#39;: {&#39;data&#39;: &#39;1231231312&#39;},
 &#39;key5&#39;: {&#39;data&#39;: &#39;a@b.c&#39;},
 &#39;pos&#39;: &#39;key2&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Chatbot-with-decision-making-elements">Chatbot with decision making elements<a class="anchor-link" href="#Chatbot-with-decision-making-elements"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's build a sample bot that asks if soap or hand sanitizer is needed and quotes unit price accordingly</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="1.-Ask-for-choice">1. Ask for choice<a class="anchor-link" href="#1.-Ask-for-choice"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A multichoice segment takes a list of possible responses as argument. User response is validated to be in range 1...N (for N choices). Both user response and actual choice is stored in data</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">flowchatbot</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">bot</span> <span class="o">=</span> <span class="n">TextAdapter</span><span class="p">(</span>
            <span class="n">Composite</span><span class="p">(</span><span class="s1">&#39;key1&#39;</span><span class="p">,</span>
                  <span class="n">Segment</span><span class="p">(</span><span class="s1">&#39;key2&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Welcome to Shop bot&#39;</span><span class="p">),</span>
                  <span class="n">Segment</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Your name?&#39;</span><span class="p">,</span> <span class="s1">&#39;got it&#39;</span><span class="p">),</span>
                  <span class="n">MultiChoiceSegment</span><span class="p">(</span><span class="s1">&#39;choice&#39;</span><span class="p">,</span> <span class="s1">&#39;Which item do you want?&#39;</span><span class="p">,</span>
                                    <span class="p">[</span><span class="s1">&#39;Soap&#39;</span><span class="p">,</span>
                                    <span class="s1">&#39;Hand Sanitizer&#39;</span><span class="p">],</span> <span class="s1">&#39;Sure&#39;</span><span class="p">),</span> <span class="c1"># ask for choice</span>
                      
                           <span class="p">))</span>
<span class="n">bot</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">flushall</span><span class="p">()</span> <span class="c1"># clear all old sessions</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;hi&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Welcome to Shop bot
Your name?
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;Testing&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>got it
Which item do you want?
1. Soap
2. Hand Sanitizer
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Please enter one of 1..2 as answer
Which item do you want?
1. Soap
2. Hand Sanitizer
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Sure

</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">bot</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;key2&#39;: {&#39;data&#39;: &#39;hi&#39;},
 &#39;name&#39;: {&#39;data&#39;: &#39;Testing&#39;},
 &#39;choice&#39;: {&#39;data&#39;: [0, &#39;Soap&#39;]},
 &#39;pos&#39;: &#39;key2&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.-Take-branch-as-per-choice">2. Take branch as per choice<a class="anchor-link" href="#2.-Take-branch-as-per-choice"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A splitter is flowchart decision making element. It takes a splitter function argument which is passed with data of parent container (usually <a href="/flowchatbot/multiprocess-bot.html#Composite"><code>Composite</code></a>) and actual user response. It returns index of branch to take.</p>
<p>So, in our case, flow will look like:
<img src="/flowchatbot/images/5.png" alt="Flow 5"></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">flowchatbot</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">decide_product</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">get_chained_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;choice&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">bot</span> <span class="o">=</span> <span class="n">TextAdapter</span><span class="p">(</span>
            <span class="n">Composite</span><span class="p">(</span><span class="s1">&#39;key1&#39;</span><span class="p">,</span>
                  <span class="n">Segment</span><span class="p">(</span><span class="s1">&#39;key2&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Welcome to Shop bot&#39;</span><span class="p">),</span>
                  <span class="n">Segment</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Your name?&#39;</span><span class="p">,</span> <span class="s1">&#39;got it&#39;</span><span class="p">),</span>
                  <span class="n">MultiChoiceSegment</span><span class="p">(</span><span class="s1">&#39;choice&#39;</span><span class="p">,</span> <span class="s1">&#39;Which item do you want?&#39;</span><span class="p">,</span>
                                    <span class="p">[</span><span class="s1">&#39;Soap&#39;</span><span class="p">,</span>
                                    <span class="s1">&#39;Hand Sanitizer&#39;</span><span class="p">],</span> <span class="s1">&#39;Sure&#39;</span><span class="p">),</span> <span class="c1"># ask for choice</span>
                  <span class="n">Splitter</span><span class="p">(</span><span class="s1">&#39;split1&#39;</span><span class="p">,</span> 
                           <span class="n">Segment</span><span class="p">(</span><span class="s1">&#39;soap&#39;</span><span class="p">,</span> <span class="s1">&#39;Price of one soap is 30 Rs.&#39;</span><span class="p">,</span> <span class="s1">&#39;got it&#39;</span><span class="p">),</span>
                           <span class="n">Segment</span><span class="p">(</span><span class="s1">&#39;sanitize&#39;</span><span class="p">,</span> 
                                   <span class="s1">&#39;Price of hand sanitizer bottle is 60 Rs.&#39;</span><span class="p">,</span> <span class="s1">&#39;got it&#39;</span><span class="p">),</span>
                          <span class="n">decider_fn</span> <span class="o">=</span> <span class="n">decide_product</span>
                           <span class="p">)))</span>
<span class="n">bot</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">flushall</span><span class="p">()</span> <span class="c1"># clear all old sessions</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;hi&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;Testing&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Welcome to Shop bot
Your name?
got it
Which item do you want?
1. Soap
2. Hand Sanitizer
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Please enter one of 1..2 as answer
Which item do you want?
1. Soap
2. Hand Sanitizer
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Sure
Price of hand sanitizer bottle is 60 Rs.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="3.-Add-computation-at-the-end">3. Add computation at the end<a class="anchor-link" href="#3.-Add-computation-at-the-end"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So far each segment has been a plain question answer or validation or decision making segment. We haven't associated any action with it. E.g. at the end of conversation we may want to send a mail to bot owner about customer interaction and contact details. Also if we want OTP validation for phone/email we need to interact with APIs in that particular segment.</p>
<p>For such cases, it is useful to implement a subclass of <a href="/flowchatbot/multiprocess-bot.html#ComputeSegment"><code>ComputeSegment</code></a> and override answer method. It is just like a plain segment, but answer gets data of parent (<a href="/flowchatbot/multiprocess-bot.html#Composite"><code>Composite</code></a>) segment.</p>
<p>Let's build a bot based on previous example. Here we'll add a compute segment at end to ask how many units customer wants to buy and compute price according to choice. This can be easily implemented without decision making element, but we'll use it anyway just for sake of continuity,</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">flowchatbot</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">decide_product</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">get_chained_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;choice&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">class</span> <span class="nc">PriceCompute</span><span class="p">(</span><span class="n">ComputeSegment</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">answer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="n">ch</span> <span class="o">=</span> <span class="n">get_chained_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;choice&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">price</span> <span class="o">=</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">60</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">vol</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">vol</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">cost</span> <span class="o">=</span> <span class="n">vol</span> <span class="o">*</span> <span class="n">price</span><span class="p">[</span><span class="n">ch</span><span class="p">]</span>
        <span class="n">set_chained_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;calculate&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="n">cost</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">CHAT_RET</span><span class="o">.</span><span class="n">NEXT</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;txt&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;Total cost is </span><span class="si">{</span><span class="n">cost</span><span class="si">}</span><span class="s1"> Rs.&#39;</span><span class="p">}</span>
    
<span class="n">bot</span> <span class="o">=</span> <span class="n">TextAdapter</span><span class="p">(</span>
            <span class="n">Composite</span><span class="p">(</span><span class="s1">&#39;key1&#39;</span><span class="p">,</span>
                  <span class="n">Segment</span><span class="p">(</span><span class="s1">&#39;key2&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Welcome to Shop bot&#39;</span><span class="p">),</span>
                  <span class="n">Segment</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Your name?&#39;</span><span class="p">,</span> <span class="s1">&#39;got it&#39;</span><span class="p">),</span>
                  <span class="n">MultiChoiceSegment</span><span class="p">(</span><span class="s1">&#39;choice&#39;</span><span class="p">,</span> <span class="s1">&#39;Which item do you want?&#39;</span><span class="p">,</span>
                                    <span class="p">[</span><span class="s1">&#39;Soap&#39;</span><span class="p">,</span>
                                    <span class="s1">&#39;Hand Sanitizer&#39;</span><span class="p">],</span> <span class="s1">&#39;Sure&#39;</span><span class="p">),</span> <span class="c1"># ask for choice</span>
                  <span class="n">Splitter</span><span class="p">(</span><span class="s1">&#39;split1&#39;</span><span class="p">,</span> 
                           <span class="n">Segment</span><span class="p">(</span><span class="s1">&#39;soap&#39;</span><span class="p">,</span> <span class="s1">&#39;Price of one soap is 30 Rs. &#39;</span> <span class="o">+</span>
                           <span class="s1">&#39;Put the order?&#39;</span><span class="p">,</span> <span class="s1">&#39;got it&#39;</span><span class="p">),</span>
                           <span class="n">Segment</span><span class="p">(</span><span class="s1">&#39;sanitize&#39;</span><span class="p">,</span> 
                                   <span class="s1">&#39;Price of hand sanitizer bottle is 60 Rs. &#39;</span> <span class="o">+</span>
                                   <span class="s1">&#39;Put the order?&#39;</span><span class="p">,</span> <span class="s1">&#39;got it&#39;</span><span class="p">),</span>
                          <span class="n">decider_fn</span> <span class="o">=</span> <span class="n">decide_product</span>
                           <span class="p">),</span>
                  <span class="n">PriceCompute</span><span class="p">(</span><span class="s1">&#39;calculate&#39;</span><span class="p">,</span> <span class="s1">&#39;How many units do you want?&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)))</span>
<span class="n">bot</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">flushall</span><span class="p">()</span> <span class="c1"># clear all old sessions</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;hi&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;Testing&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Welcome to Shop bot
Your name?
got it
Which item do you want?
1. Soap
2. Hand Sanitizer
Please enter one of 1..2 as answer
Which item do you want?
1. Soap
2. Hand Sanitizer
Sure
Price of hand sanitizer bottle is 60 Rs. Put the order?
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>got it
How many units do you want?
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Total cost is 300 Rs.

</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">bot</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;key2&#39;: {&#39;data&#39;: &#39;hi&#39;},
 &#39;name&#39;: {&#39;data&#39;: &#39;Testing&#39;},
 &#39;choice&#39;: {&#39;data&#39;: [1, &#39;Hand Sanitizer&#39;]},
 &#39;split1&#39;: {&#39;pos&#39;: &#39;sanitize&#39;, &#39;sanitize&#39;: {&#39;data&#39;: &#39;yes&#39;}},
 &#39;calculate&#39;: {&#39;data&#39;: 300},
 &#39;pos&#39;: &#39;key2&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Footer">Footer<a class="anchor-link" href="#Footer"> </a></h2>
</div>
</div>
</div>
</div>
 

